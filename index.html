<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TEST</title>
    <script type="module">
      //import React from "https://esm.sh/react@19.0.0-beta-04b058868c-20240508/?dev"
      //import ReactDOMClient from "https://esm.sh/react-dom@19.0.0-beta-04b058868c-20240508/client/?dev"

      //window.onload = () => {
        //const rootElement = ReactDOMClient.createRoot(document.getElementById('root'));
        //const ints = [1, 2, 3,4,5];
        //const elements = ints.map(i => React.createElement('li', { key : "ul-test-" + i}, i));
        //rootElement.render(React.createElement('ul', {}, elements));
      //};
    </script>

<style type="text/css">
body {
  background: rgb(0,5,85);
  background: linear-gradient(305deg, rgba(0,5,85,1) 0%, rgba(0,212,255,1) 100%);
}
#main {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
}
#top {
  display: flex;
  flex-direction: row;
  flex-grow: 1;
  flex-grow: 1;
  height: 100%;
  overflow:hidden;
}

#bottom {
  display: flex;
  background: #afa6a60a;
  flex-grow: 1;
  height: 100%;
  overflow:hidden;

}

#todaysBoxWeather {
  display: flex;
  flex-direction: row;
  background: #000000a8;
  flex-grow: 1;
  margin:20px;
  border-radius: 20px;
  max-width:500px;
}

#todaysWeather {
  display: flex;
  background-image: url(https://www.jma.go.jp/bosai/forecast/img/101.svg);
  background-repeat: no-repeat;
  background-size: contain;
  background-position: center;
  width:100%;
  height:100%;
}
#todaysTemp {
  display: flex;
  flex-direction: column;
  width:100%;
  height:100%;
  align-items: center;
  overflow: hidden;
}
p {
  margin:0;
  padding:0;
}
#todaysMaxTemp {
  display: flex;
  flex-grow: 1;
  color: #fd4c4c;
  font-size: 5em;
  font-weight: bold;
  align-items: center;
}
#todaysMinTemp {
  display: flex;
  flex-grow: 1;
  color: #c1adf8;
  font-size: 5em;
  font-weight: bold;
  align-items: center;
}


#todaysBoxRain {
  display: flex;
  flex-direction: column;
  background: #0000006c;
  flex-grow: 3;
  margin:20px;
  padding: 10px;
  border-radius: 20px;
}
h2 {
  margin:0;
  padding: 0;
  text-align: center;
  color: #ffffff;
  display: flex;
  flex-grow: 1;
  align-items: center;
  justify-content: center;
}
#rainBox {
  display: flex;
  flex-direction: row;
  flex-grow: 18;
}
#rainBox .box{
  display: flex;
  background-color: #ffffff;
  border-radius: 20px;
  flex-grow: 1;
  margin: 0 10px;
  width: 100%;
  height: 100%;
}
</style>
</head>
<body>
<section>
  <div id="main">
    <div id="top">
      <div id="todaysBoxWeather">
        <i id="todaysWeather"></i>
        <div id="todaysTemp">
          <p id="todaysMaxTemp">17</p>
          <p id="todaysMinTemp">10</p>
        </div>
      </div>
      <div id="todaysBoxRain">
        <h2>降水確率</h2>
        <div id="rainBox">
          <div class="box">1</div>
          <div class="box">2</div>
          <div class="box">3</div>
          <div class="box">4</div>
        </div>
      </div>
    </div>
    <div id="bottom"></div>
  </div>
</section>
<div id="root"></div>


<script type="module">
  import React from "https://esm.sh/react@beta?dev";
  import ReactDOM from "https://esm.sh/react-dom@beta?dev";
  import ReactDOMClient from "https://esm.sh/react-dom@beta/client?dev";
  // import ReactDOMServer from "https://esm.sh/react-dom@beta/server.browser?dev";

  window.React = React;
  window.ReactDOM = ReactDOM;
  window.ReactDOMClient = ReactDOMClient;
  // window.ReactDOMServer = ReactDOMServer;
</script>

<script type="module">
////////////////////////////////////////////////////

const resource = (async() => {
  const r = await fetch('https://www.jma.go.jp/bosai/forecast/data/forecast/130000.json')
  return await r.json()
})()

//
const Inner = props => {
  const json = React.use(resource)
  console.log(json);
  const dailyForecastArea = json[0].timeSeries[0].areas[0];
  const dailyForecastTimeZone = json[0].timeSeries[0].timeDefines;

  console.log(dailyForecastArea)
  console.log(dailyForecastTimeZone)

  //https://www.jma.go.jp/bosai/forecast/img/101.svg

  // 格納された日付配列を起点にデータを形成
  dailyForecastTimeZone.forEach( (timeZone, i) => {
    let date = new Date(timeZone)
    const weatherCode = dailyForecastArea.weatherCodes[i];
    const weatherCodeUrl = `https://www.jma.go.jp/bosai/forecast/img/${weatherCode}.svg`;
    //document.write('<img src="' + weatherCodeUrl + '" style="zoom:2"/>');
    
  });

//  const posts = json.data.children.map((child) => child.data);
//  return posts.map(post => 
//    React.createElement('div', {key: post.id}, post.title)
//  )

  return React.createElement('div', {key: "OK"}, "OK")
}

//
const App = props => {
  return React.createElement(React.Suspense, 
    {
      fallback: React.createElement('p', {}, 'Now Loading...')
    }, 
    React.createElement(Inner)
  )
}
const rootElement = ReactDOMClient.createRoot(document.getElementById('root'));
rootElement.render(React.createElement(App))

const createDayText = day => {
 const days = ["Sun", "Mon", "Tue", "Wed", "Thu" , "Fri", "Sat"]
 return days[day]
}

const DigiClock = () => {
 const dateTime = new Date();
 const year = dateTime.getFullYear();
 const month = dateTime.getMonth() + 1;
 const date  = dateTime.getDate();
 const day = createDayText(dateTime.getDay());
 const hour = dateTime.getHours();
 const min = dateTime.getMinutes();
 const sec = dateTime.getSeconds();
 console.log(`${year}年${month}月${date}日(${day}) ${hour}時${min}分${sec}`);

};

DigiClock();
////////////////////////////////////////////////////
</script>

</body>
</html>
