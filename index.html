<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TEST</title>
    <script type="module">
      //import React from "https://esm.sh/react@19.0.0-beta-04b058868c-20240508/?dev"
      //import ReactDOMClient from "https://esm.sh/react-dom@19.0.0-beta-04b058868c-20240508/client/?dev"

      //window.onload = () => {
        //const rootElement = ReactDOMClient.createRoot(document.getElementById('root'));
        //const ints = [1, 2, 3,4,5];
        //const elements = ints.map(i => React.createElement('li', { key : "ul-test-" + i}, i));
        //rootElement.render(React.createElement('ul', {}, elements));
      //};
    </script>

<style type="text/css">
body {
  background: rgb(0,5,85);
  background: linear-gradient(305deg, rgba(0,5,85,1) 0%, rgba(0,212,255,1) 100%);
  margin:0;
  padding:0;
  font-size:1em;
  font-family: "Helvetica Neue",
    Arial,
    "Hiragino Kaku Gothic ProN",
    "Hiragino Sans",
    Meiryo,
    sans-serif;

}
p {
  margin:0; padding:0;
}
div { 
  margin:0; padding:0;
  box-sizing: border-box;
}

.widget {
  display: flex;
  flex-direction: column;
  box-shadow: 0 0 5px #000000;
}
.boxRow {
  display: flex;
  flex-direction: row;
  flex-grow: 1;
  align-items: center;
  justify-content: center;
}
.boxColumn {
  display: flex;
  flex-direction:column;
  flex-grow: 1;
  align-items: center;
  justify-content: center;
}

.boxInner {
  background-color: #ffffff11;
  border-radius: 10px;
}

.h2 {
  display: flex;
  margin:0;
  padding: 0;
  font-size:2em;
  text-align: center;
  color: #ffffff;
  align-items: center;
  justify-content: center;
}

#main {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
}
#head {
  display: flex;
  flex-direction: row;
  height: 60px;
  overflow:hidden;
  font-weight: bold;
  font-size: 2.5em;
  justify-content: center;
  align-items: center;
  color: #ffffff;
  background: #afa6a60a;
  /* box-shadow: 0 0 10px #0000006c; */
}

#top {
  display: flex;
  flex-direction: row;
  flex-grow: 1;
  overflow:hidden;
  max-height: 300px;
  padding:10px;
}

#bottom {
  display: flex;
  background-color: #afa6a60a;
  flex-grow:unset;
  overflow:hidden;
  padding: 10px;
}

#widgetWeather {
  background-color: #153D70ff;
  flex-grow: 1;
  border-radius: 20px;
  max-width:500px;
  padding: 10px;
  margin : 0 10px;
  overflow: hidden;
}

#todaysWeather {
  display: flex;
  background-image: url(https://www.jma.go.jp/bosai/forecast/img/101.svg);
  background-repeat: no-repeat;
  background-size: contain;
  background-position: center;
  width:100%;
  height:100%;
}
#todaysTemp {
  display: flex;
  flex-direction: column;
  width:100%;
  height:100%;
  align-items: center;
}
#todaysMaxTemp {
  display: flex;
  flex-grow: 1;
  color: #fd4c4c;
  color: #ffffff;
  font-size: 6em;
  font-weight: bold;
  align-items: center;
  overflow: hidden;
  width: 100%;
  justify-content: center;
}
#todaysMaxTemp::after {
  content: '℃';
  font-size:0.5em;
}
/* #todaysMaxTemp::before {
  content : url(./low-temperature-icon.svg);
  width:20px;
  height:20px;
  color: white;
  margin-top:-20px;
  margin-right:10px;
} */
#todaysMinTemp {
  display: flex;
  flex-grow: 1;
  color: #c1adf8;
  font-size: 3em;
  font-weight: bold;
  align-items: center;
  overflow: hidden;
  display: none;
}


#widgetRain {
  display: flex;
  flex-direction: column;
  background-color: #153D70ff;
  flex-grow: 3;
  border-radius: 10px;
  padding: 10px;
  margin : 0 10px;
  overflow: hidden;
}

.boxRain{
  background-color: #ffffff;
  border-radius: 20px;
  flex-grow: 1;
  margin: 0 10px;
  width: 100%;
  height: 100%;
}
.boxRain .time{
  display: flex;
  flex-grow: 1;
  justify-content: center;
  align-items: flex-end;
  font-weight: bold;
  font-size:2em;
  color:  #153D70ff;
}
.boxRain .perc{
  display: flex;
  flex-grow: 1;
  justify-content: center;
  align-items: baseline;
  font-weight: bold;
  font-weight: bold;
  font-size:3.5em;
  color:  #153D70ff;
}


/* BOTTOM BOX */
#widgetWeeklyWeather {
  display: flex;
  flex-direction: column;
  background-color: #153D7055;
  flex-grow: 3;
  border-radius: 10px;
  padding: 10px;
  margin : 0 10px;
  overflow: hidden;
}
.boxDates {
  align-items: flex-start;
}
.boxDate {
  border-right: 1px solid #ffffff33;
}
.boxDate:last-child {  border:none; 
}
.boxDate p.date {
  display: flex;
  flex-grow: 1;
  font-size:2em;
  font-weight: bold;
  color:#ffffff;
}
.boxDate i.weather {
  display: flex;
  flex-grow: 2;
  background-image: url(https://www.jma.go.jp/bosai/forecast/img/115.svg);
  background-repeat: no-repeat;
  background-size: contain;
  background-position: center;
  width:100%;
  height: 200px;

}
.boxDate .boxSmall {
  display: flex;
  flex-grow: 1;
  width: 100%;
  font-size:2em;
} 

.boxDate .boxSmall .maxTemp {
  display: flex;
  flex-grow: 1;
  justify-content: right;
  font-weight: bold;
  color: #FF5050;
  padding: 0 5px 0 0;
}
/* .boxDate .boxSmall .maxTemp::before {
  content : url(./high-temperature-icon.svg);
  width:12px;
  height:12px;
  margin-top:5px;
  margin-right:10px;
} */
.boxDate .boxSmall .maxTemp::after {
  content: '℃';
  font-size:.5em;
}


.boxDate .boxSmall .lowTemp {
  display: flex;
  flex-grow: 1;
  justify-content: left;
  color: #51A0FF;
  padding: 0 0 0 5px;
}
/* .boxDate .boxSmall .lowTemp::before {
  content : url(./low-temperature-icon.svg);
  width:12px;
  height:12px;
  margin-top:5px;
  margin-right:10px;
} */
.boxDate .boxSmall .lowTemp::after {
  content: '℃';
  font-size:.5em;
}


.boxDate p.perc {
  display: flex;
  flex-grow: 2;
  font-size:2em;
  font-weight: bold;
  color:#ffffff;
}
</style>
</head>
<body>
<section>
  <div id="main">
    <div id="head">2024年2月10日(水曜日)</div>
    <div id="top">
      <div id="widgetWeather" class="widget">
        <h2 class="h2">本日の気温</h2>
        <div class="boxRow boxInner">
          <!-- <i id="todaysWeather"></i> -->
          <div class="boxColumn">
            <p id="todaysMaxTemp">17</p>
            <p id="todaysMinTemp">10</p>
          </div>
        </div>
      </div>
      <div id="widgetWeather" class="widget">
        <h2 class="h2">本日の天気</h2>
        <div class="boxRow boxInner">
          <i id="todaysWeather"></i>
        </div>
      </div>
      <div id="widgetRain" class="widget">
        <h2 class="h2">降水確率</h2>
        <div class="boxRow">
          <div class="boxRain boxColumn">
            <p class="time">0-6時</p>
            <p class="perc">10%</p>
          </div>
          <div class="boxRain boxColumn">
            <p class="time">6-12時</p>
            <p class="perc">10%</p>
          </div>
          <div class="boxRain boxColumn">
            <p class="time">12-18時</p>
            <p class="perc">10%</p>
          </div>
          <div class="boxRain boxColumn">
            <p class="time">18-0時</p>
            <p class="perc">10%</p>
          </div>
        </div>
      </div>
    </div>
    <div id="bottom">

      <div  id="widgetWeeklyWeather" class="widget">
        <div class="boxDates boxRow">

          <div class="boxDate boxColumn">
            <p class="date">8日(火)</p>
            <i class="weather"></i>
            <div class="boxSmall">
              <p class="maxTemp">20</p>
              <p class="lowTemp">10</p>
            </div>
            <p class="perc">10%</p>
          </div>

          <div class="boxDate boxColumn">
            <p class="date">9日(水)</p>
            <i class="weather"></i>
            <div class="boxSmall">
              <p class="maxTemp">20</p>
              <p class="lowTemp">10</p>
            </div>
            <p class="perc">10%</p>
          </div>

          <div class="boxDate boxColumn">
            <p class="date">10日(木)</p>
            <i class="weather"></i>
            <div class="boxSmall">
              <p class="maxTemp">20</p>
              <p class="lowTemp">10</p>
            </div>
            <p class="perc">10%</p>
          </div>

          <div class="boxDate boxColumn">
            <p class="date">11日(金)</p>
            <i class="weather"></i>
            <div class="boxSmall">
              <p class="maxTemp">20</p>
              <p class="lowTemp">10</p>
            </div>
            <p class="perc">10%</p>
          </div>

          <div class="boxDate boxColumn">
            <p class="date">12日(土)</p>
            <i class="weather"></i>
            <div class="boxSmall">
              <p class="maxTemp">20</p>
              <p class="lowTemp">10</p>
            </div>
            <p class="perc">10%</p>
          </div>

          <div class="boxDate boxColumn">
            <p class="date">13日(日)</p>
            <i class="weather"></i>
            <div class="boxSmall">
              <p class="maxTemp">20</p>
              <p class="lowTemp">10</p>
            </div>
            <p class="perc">10%</p>
          </div>

          <div class="boxDate boxColumn">
            <p class="date">14日(月)</p>
            <i class="weather"></i>
            <div class="boxSmall">
              <p class="maxTemp">20</p>
              <p class="lowTemp">10</p>
            </div>
            <p class="perc">10%</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<div id="root"></div>


<script type="module">
  import React from "https://esm.sh/react@beta?dev";
  import ReactDOM from "https://esm.sh/react-dom@beta?dev";
  import ReactDOMClient from "https://esm.sh/react-dom@beta/client?dev";
  // import ReactDOMServer from "https://esm.sh/react-dom@beta/server.browser?dev";

  window.React = React;
  window.ReactDOM = ReactDOM;
  window.ReactDOMClient = ReactDOMClient;
  // window.ReactDOMServer = ReactDOMServer;
</script>

<script type="module">
////////////////////////////////////////////////////

const resource = (async() => {
  const r = await fetch('https://www.jma.go.jp/bosai/forecast/data/forecast/130000.json')
  return await r.json()
})()

//
const Inner = props => {
  const json = React.use(resource)
  console.log(json);
  const dailyForecastArea = json[0].timeSeries[0].areas[0];
  const dailyForecastTimeZone = json[0].timeSeries[0].timeDefines;

  console.log(dailyForecastArea)
  console.log(dailyForecastTimeZone)

  //https://www.jma.go.jp/bosai/forecast/img/101.svg

  // 格納された日付配列を起点にデータを形成
  dailyForecastTimeZone.forEach( (timeZone, i) => {
    let date = new Date(timeZone)
    const weatherCode = dailyForecastArea.weatherCodes[i];
    const weatherCodeUrl = `https://www.jma.go.jp/bosai/forecast/img/${weatherCode}.svg`;
    //document.write('<img src="' + weatherCodeUrl + '" style="zoom:2"/>');
    
  });

//  const posts = json.data.children.map((child) => child.data);
//  return posts.map(post => 
//    React.createElement('div', {key: post.id}, post.title)
//  )

  return React.createElement('div', {key: "OK"}, "OK")
}

//
const App = props => {
  return React.createElement(React.Suspense, 
    {
      fallback: React.createElement('p', {}, 'Now Loading...')
    }, 
    React.createElement(Inner)
  )
}
const rootElement = ReactDOMClient.createRoot(document.getElementById('root'));
rootElement.render(React.createElement(App))

const createDayText = day => {
 const days = ["Sun", "Mon", "Tue", "Wed", "Thu" , "Fri", "Sat"]
 return days[day]
}

const DigiClock = () => {
 const dateTime = new Date();
 const year = dateTime.getFullYear();
 const month = dateTime.getMonth() + 1;
 const date  = dateTime.getDate();
 const day = createDayText(dateTime.getDay());
 const hour = dateTime.getHours();
 const min = dateTime.getMinutes();
 const sec = dateTime.getSeconds();
 console.log(`${year}年${month}月${date}日(${day}) ${hour}時${min}分${sec}`);

};

DigiClock();
////////////////////////////////////////////////////
</script>

</body>
</html>
